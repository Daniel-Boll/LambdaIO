<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- metadata -->
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Preste bastante anteção nas linhas abaixo disso -->
    <!-- Não irá se arrepender ;) -->
    <script>
      var exports = {};
    </script>

    <!-- p5 lib -->
    <script src="https://cdn.jsdelivr.net/npm/p5@1.2.0/lib/p5.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/phoenix-js@1.0.3/dist/cjs/main.min.js"></script>

    <!-- dependencies files -->
    <script src="server.js"></script>
    <script src="main.js"></script>

    <!-- css -->
    <link rel="stylesheet" href="./style.css" />

    <title>Lambda shooter</title>
  </head>
  <body>
    <h1>Lambda shooter, motherfucker!</h1>
  </body>
</html>

<!-- codigo -->

let width = 800; let height = 600; let playerState = { stats: { health: 30,
velocity: 3, score: 0, }, position: { x: width / 2, y: height / 2, }, shoot: [],
}; let lastShot = Date.now(); function setup() { createCanvas(width, height); }
function draw() { background(231); fill(255, 0, 0); rect(playerState.position.x,
playerState.position.y, 10, 10); fill(255); movement(); if (Date.now() >=
lastShot) shoot(); drawShoot(); } const drawShoot = () => { // TODO: Atirar fora
do player if (playerState.shoot) { for (index in playerState.shoot) { let bullet
= playerState.shoot[index]; bullet.origin.add(bullet.velocity);
ellipse(bullet.origin.x, bullet.origin.y, 10, 10); const leftWall =
bullet.origin.x <= 0; const rightWall = bullet.origin.x >= width; const
bottomWall = bullet.origin.y >= height; const upperWall = bullet.origin.y <= 0;
if (leftWall || rightWall || bottomWall || upperWall) {
playerState.shoot.splice(index, 1); } else { playerState.shoot[index].origin =
bullet.origin; } } } }; const shoot = () => { if (mouseIsPressed) { let toX =
mouseX - playerState.position.x; let toY = mouseY - playerState.position.y; let
velocity = createVector(toX, toY); velocity.normalize(); velocity.mult(5); let
origin = createVector(playerState.position.x, playerState.position.y);
origin.mag(velocity * 10); playerState.shoot.push({ origin, velocity });
lastShot = Date.now() + 500; } }; const movement = () => { if
(keyIsDown(LEFT_ARROW) || keyIsDown(65)) { playerState.position.x -=
playerState.stats.velocity; } if (keyIsDown(RIGHT_ARROW) || keyIsDown(68)) {
playerState.position.x += playerState.stats.velocity; } if (keyIsDown(UP_ARROW)
|| keyIsDown(87)) { playerState.position.y -= playerState.stats.velocity; } if
(keyIsDown(DOWN_ARROW) || keyIsDown(83)) { playerState.position.y +=
playerState.stats.velocity; } playerState.position.x =
constrain(playerState.position.x, 0, width - 10); playerState.position.y =
constrain(playerState.position.y, 0, height - 10); };

<!-- css -->

@import url("https://fonts.googleapis.com/css2?family=Roboto&display=swap"); * {
margin: 0; padding: 0; } body { height: 100vh; width: 100vw; display: flex;
flex-direction: column; justify-content: center; align-items: center; } h1 {
margin-bottom: 30px; font-family: "Roboto", monospace; }
